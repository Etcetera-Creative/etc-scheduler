generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Plan {
  id              String     @id @default(cuid())
  slug            String     @unique
  name            String
  description     String?
  startDate       DateTime
  endDate         DateTime
  mode            String     @default("DATE_RANGE")
  availableDates  DateTime[]
  timeWindows     Json?
  desiredDuration Int?
  creatorId       String     // Supabase user ID
  creatorName     String?
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt
  responses       Response[]

  @@index([creatorId])
}

model Response {
  id                  String   @id @default(cuid())
  planId              String
  guestName           String
  selectedDates       DateTime[]
  comment             String?
  selectedTimeWindows Json?
  createdAt           DateTime @default(now())
  plan                Plan     @relation(fields: [planId], references: [id], onDelete: Cascade)

  @@index([planId])
}
